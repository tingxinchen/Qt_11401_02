# 使用範例

本文件提供 Qt 通訊軟體的實際使用範例。

## 場景 1: 本機測試（單一電腦）

### 步驟 1: 啟動第一個實例（伺服器端）

```bash
# 終端機 1
./ChatApp
```

1. 點擊「新增好友」，輸入「Bob」
2. 點擊「啟動伺服器」
3. 輸入連接埠：`8888`
4. 等待連接

### 步驟 2: 啟動第二個實例（客戶端）

```bash
# 終端機 2
./ChatApp
```

1. 點擊「新增好友」，輸入「Alice」
2. 雙擊「Alice」開啟聊天視窗
3. 點擊「連接」按鈕
4. 輸入 IP：`127.0.0.1`
5. 輸入連接埠：`8888`
6. 連接成功後開始聊天

### 步驟 3: 雙向通訊

**客戶端（終端機 2）：**
- 輸入訊息：「你好，Alice！」
- 點擊「發送」

**伺服器端（終端機 1）：**
- 會自動開啟「Bob」的聊天視窗
- 顯示收到的訊息
- 可以回覆訊息

## 場景 2: 區域網路通訊（兩台電腦）

### 電腦 A（伺服器端，IP: 192.168.1.100）

1. 啟動應用程式
2. 新增好友「電腦B的使用者」
3. 啟動伺服器，使用連接埠 `8888`
4. 確認防火牆允許連接埠 8888

### 電腦 B（客戶端，IP: 192.168.1.101）

1. 啟動應用程式
2. 新增好友「電腦A的使用者」
3. 雙擊好友名稱開啟聊天視窗
4. 連接到：
   - IP: `192.168.1.100`
   - 連接埠: `8888`
5. 開始聊天

## 場景 3: 多人通訊管理

雖然是一對一通訊軟體，但可以管理多個好友：

### 電腦 A（中心伺服器）

```
好友名單：
- Bob
- Charlie
- David
```

1. 啟動伺服器（連接埠 8888）
2. 等待不同好友連接
3. 每個好友連接時會自動開啟對應的聊天視窗
4. 可以同時與多個好友進行獨立的一對一對話

### 各客戶端

每個客戶端分別連接到伺服器，進行獨立的一對一對話。

## 常見使用技巧

### 1. 快速發送訊息

在訊息輸入框中輸入文字後，可以：
- 點擊「發送」按鈕
- 直接按 `Enter` 鍵

### 2. 管理好友名單

```
新增好友 → 輸入名稱 → 確認
刪除好友 → 選擇好友 → 點擊刪除 → 確認
```

### 3. 查看連接狀態

聊天視窗頂部會顯示當前連接狀態：
- 「未連接」：尚未連接
- 「連接中...」：正在建立連接
- 「已連接」：可以傳送訊息
- 「連接失敗」：連接錯誤

### 4. 伺服器管理

```
啟動伺服器：
1. 點擊「啟動伺服器」
2. 輸入連接埠號（1024-65535）
3. 確認

停止伺服器：
1. 點擊「停止伺服器」（按鈕文字會改變）
2. 確認
```

## 防火牆設定

### Linux (UFW)

```bash
# 允許特定連接埠
sudo ufw allow 8888/tcp

# 查看狀態
sudo ufw status
```

### Windows

1. 控制台 → 系統及安全性 → Windows Defender 防火牆
2. 進階設定 → 輸入規則 → 新增規則
3. 連接埠 → TCP → 特定本機連接埠 → 8888
4. 允許連線 → 完成

### macOS

```bash
# 系統偏好設定 → 安全性與隱私權 → 防火牆 → 防火牆選項
# 新增應用程式 ChatApp 到允許清單
```

## 故障排除

### 問題 1: 無法連接

**症狀：** 點擊連接後顯示「連接失敗」

**解決方法：**
1. 確認伺服器已啟動
2. 確認 IP 位址正確
3. 確認連接埠號正確
4. 檢查防火牆設定
5. 確認兩台電腦在同一網路

### 問題 2: 訊息無法發送

**症狀：** 點擊發送後沒有反應或顯示錯誤

**解決方法：**
1. 確認連接狀態為「已連接」
2. 確認訊息不是空白的
3. 嘗試斷開重新連接

### 問題 3: 好友名單不見了

**症狀：** 重新啟動後好友名單是空的

**解決方法：**
1. 檢查應用程式是否有寫入權限
2. 查看設定檔位置（通常在使用者的應用程式資料目錄）
3. 手動備份 friends.txt 檔案

## 最佳實踐

1. **固定連接埠**：選擇一個固定的連接埠號便於記憶
2. **好友命名**：使用清楚的名稱標識好友
3. **定期備份**：備份好友名單檔案
4. **安全性**：僅在信任的網路環境中使用
5. **測試連接**：重要對話前先測試連接

## 進階用法

### 使用非標準連接埠

為了避免衝突，可以使用較大的連接埠號：

```
推薦連接埠範圍：49152-65535（動態/私有連接埠）
範例：50000, 55555, 60000
```

### 同時運行多個實例

可以在同一台電腦上運行多個實例進行測試：

```bash
./ChatApp &  # 實例 1
./ChatApp &  # 實例 2
./ChatApp &  # 實例 3
```

每個實例使用不同的連接埠。

## 效能建議

1. **訊息長度**：建議單次訊息不超過 10,000 字元
2. **連接數量**：單一伺服器建議不超過 10 個同時連接
3. **網路環境**：區域網路環境下延遲最低

## 安全注意事項

⚠️ **重要：** 此軟體為教學用途，訊息未加密：

1. 不要傳送敏感資訊
2. 僅在信任的網路環境使用
3. 注意防火牆設定，不要暴露在公網
4. 定期更新軟體
